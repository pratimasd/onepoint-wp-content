(()=>{"use strict";var e,t={505(){const e=window.wp.blocks,t=window.wp.blockEditor,o=window.wp.components,n=window.wp.i18n,a=window.wp.element,l=window.ReactJSXRuntime,s={categoryTag:"Press - release",imageUrl:"",imageAlt:"",title:"Onepoint wins Boomi EMEA Teaming Systems Integrator Partner of the Year 2023 award",buttonText:"Read press release",buttonUrl:""};(0,e.registerBlockType)("onepoint/latest-updates-carousel",{edit:function({attributes:e,setAttributes:i}){const{sectionLabel:r="Onepoint Signal",sectionHeading:c="Latest updates",sectionDescription:d="Catch up on our latest announcements and thought leadership. From key milestones to expert insights – see how we're shaping what's next.",items:p=[],autoplay:u=!0,interval:m=6}=e,g=function(e){return e&&e.length>0?e:[{...s}]}(p);(0,a.useEffect)(()=>{0===(e.items||[]).length&&i({items:[{...s}]})},[]);const[h,_]=(0,a.useState)(0),[b,x]=(0,a.useState)(0),[v,k]=(0,a.useState)(!!u);(0,a.useEffect)(()=>{k(!!u)},[u]),(0,a.useEffect)(()=>{b>=g.length&&x(Math.max(0,g.length-1))},[g.length,b]),(0,a.useEffect)(()=>{if(g.length<=1||!v)return;const e=setInterval(()=>{_(e=>(e+1)%g.length)},1e3*(m||6));return()=>clearInterval(e)},[g.length,v,m]);const y=(e,t)=>{const o=[...g];o[e]={...o[e]||s,...t},i({items:o})},j=(e,t)=>{const o=e+t;if(o<0||o>=g.length)return;const n=[...g];[n[e],n[o]]=[n[o],n[e]],i({items:n}),x(o),_(h===e?o:h===o?e:h)},w=g[b]||s,f=(0,t.useBlockProps)({className:"onepoint-latest-updates-editor"});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(t.InspectorControls,{children:[(0,l.jsxs)(o.PanelBody,{title:(0,n.__)("Section","onepoint-custom-blocks"),initialOpen:!0,children:[(0,l.jsx)(o.TextControl,{label:(0,n.__)("Section label","onepoint-custom-blocks"),value:r,onChange:e=>i({sectionLabel:e||""}),help:(0,n.__)("Small label above heading (e.g. Onepoint Signal)","onepoint-custom-blocks")}),(0,l.jsx)(o.TextControl,{label:(0,n.__)("Section heading","onepoint-custom-blocks"),value:c,onChange:e=>i({sectionHeading:e||""})}),(0,l.jsx)(o.TextareaControl,{label:(0,n.__)("Section description","onepoint-custom-blocks"),value:d,onChange:e=>i({sectionDescription:e||""}),rows:3}),(0,l.jsx)(o.ToggleControl,{label:(0,n.__)("Autoplay on load","onepoint-custom-blocks"),checked:u,onChange:e=>i({autoplay:e}),help:(0,n.__)("Auto-slide when more than 3 cards.","onepoint-custom-blocks")}),(0,l.jsx)(o.TextControl,{label:(0,n.__)("Interval (seconds)","onepoint-custom-blocks"),type:"number",value:m,onChange:e=>i({interval:Math.max(3,Math.min(15,parseInt(e,10)||6))}),help:(0,n.__)("Time per slide when auto-playing. Min 3, max 15.","onepoint-custom-blocks")})]}),(0,l.jsxs)(o.PanelBody,{title:(0,n.__)("Cards","onepoint-custom-blocks"),initialOpen:!0,children:[(0,l.jsx)("p",{style:{marginBottom:8,fontSize:12,color:"#757575"},children:(0,n.__)("3 cards visible at a time. Add, remove, or reorder cards. Select a card to edit.","onepoint-custom-blocks")}),g.map((e,t)=>(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:6,flexWrap:"wrap"},children:[(0,l.jsx)(o.Button,{variant:b===t?"primary":"secondary",onClick:()=>{x(t)},style:{flex:"1 1 100px",minWidth:0,textAlign:"left",overflow:"hidden",textOverflow:"ellipsis"},children:e.categoryTag||e.title||(0,n.__)("Card","onepoint-custom-blocks")+" "+(t+1)}),(0,l.jsx)(o.Button,{variant:"tertiary",onClick:()=>j(t,-1),disabled:0===t,label:(0,n.__)("Move up","onepoint-custom-blocks"),style:{padding:"4px 8px"},children:"↑"}),(0,l.jsx)(o.Button,{variant:"tertiary",onClick:()=>j(t,1),disabled:t===g.length-1,label:(0,n.__)("Move down","onepoint-custom-blocks"),style:{padding:"4px 8px"},children:"↓"}),(0,l.jsx)(o.Button,{variant:"tertiary",isDestructive:!0,onClick:()=>(e=>{if(g.length<=1)return;const t=g.filter((t,o)=>o!==e);i({items:t});let o=b;b===e?o=Math.min(e,t.length-1):b>e&&(o=b-1);let n=h;h===e?n=Math.min(e,t.length-1):h>e&&(n=h-1),x(o),_(n)})(t),disabled:g.length<=1,label:(0,n.__)("Remove card","onepoint-custom-blocks"),style:{padding:"4px 8px"},children:(0,n.__)("Remove","onepoint-custom-blocks")})]},t)),(0,l.jsx)(o.Button,{variant:"primary",onClick:()=>{const e=[...g,{...s}];i({items:e}),x(e.length-1),_(Math.min(h,e.length-1))},style:{marginTop:8,display:"block"},children:(0,n.__)("Add card","onepoint-custom-blocks")})]}),(0,l.jsxs)(o.PanelBody,{title:(0,n.__)("Current card content","onepoint-custom-blocks"),initialOpen:!0,children:[(0,l.jsxs)("p",{style:{marginBottom:12,fontSize:12,fontWeight:600,color:"#1e1e1e"},children:[(0,n.__)("Editing card","onepoint-custom-blocks")," ",b+1," ",(0,n.__)("of","onepoint-custom-blocks")," ",g.length,w.categoryTag&&": "+w.categoryTag]}),(0,l.jsx)(o.TextControl,{label:(0,n.__)("Category tag","onepoint-custom-blocks"),value:w.categoryTag||"",onChange:e=>y(b,{categoryTag:e||""}),help:(0,n.__)("Pill label on card (e.g. Press - release, Webinar on demand, Blog)","onepoint-custom-blocks")}),(0,l.jsx)(o.TextareaControl,{label:(0,n.__)("Title / description","onepoint-custom-blocks"),value:w.title||"",onChange:e=>y(b,{title:e||""}),rows:3}),(0,l.jsx)(o.TextControl,{label:(0,n.__)("Button text","onepoint-custom-blocks"),value:w.buttonText||"",onChange:e=>y(b,{buttonText:e||""})}),(0,l.jsx)(o.TextControl,{label:(0,n.__)("Button URL","onepoint-custom-blocks"),value:w.buttonUrl||"",onChange:e=>y(b,{buttonUrl:e||""})})]}),(0,l.jsxs)(o.PanelBody,{title:(0,n.__)("Card image","onepoint-custom-blocks"),initialOpen:!0,children:[w.imageUrl&&(0,l.jsx)("div",{style:{marginBottom:12},children:(0,l.jsx)("img",{src:w.imageUrl,alt:"",style:{maxWidth:"100%",height:"auto",maxHeight:120,display:"block",borderRadius:4,border:"1px solid #ddd"}})}),(0,l.jsx)(t.MediaUploadCheck,{children:(0,l.jsx)(t.MediaUpload,{onSelect:e=>y(b,{imageUrl:e.url||e.sizes?.full?.url||"",imageAlt:e.alt||""}),allowedTypes:["image"],value:null,render:({open:e})=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Button,{variant:"secondary",onClick:e,style:{marginBottom:8,display:"block"},children:w.imageUrl?(0,n.__)("Replace image","onepoint-custom-blocks"):(0,n.__)("Select image","onepoint-custom-blocks")}),w.imageUrl&&(0,l.jsx)(o.Button,{variant:"tertiary",isDestructive:!0,onClick:()=>y(b,{imageUrl:"",imageAlt:""}),style:{display:"block"},children:(0,n.__)("Remove image","onepoint-custom-blocks")})]})})}),(0,l.jsx)(o.TextControl,{label:(0,n.__)("Image alt text","onepoint-custom-blocks"),value:w.imageAlt||"",onChange:e=>y(b,{imageAlt:e||""})})]})]}),(0,l.jsx)("div",{...f,children:(0,l.jsxs)("div",{className:"onepoint-latest-updates","data-editor-preview":!0,"data-current-index":h,"data-items-count":g.length,style:{"--lu-items":g.length},children:[(0,l.jsxs)("div",{className:"onepoint-latest-updates__header",children:[(0,l.jsxs)("div",{className:"onepoint-latest-updates__header-text",children:[r&&(0,l.jsx)("div",{className:"onepoint-latest-updates__label-wrap",children:(0,l.jsx)("p",{className:"onepoint-latest-updates__label",children:r})}),c&&(0,l.jsx)("h2",{className:"onepoint-latest-updates__heading",children:c}),d&&(0,l.jsx)("p",{className:"onepoint-latest-updates__description",children:d})]}),g.length>1&&(0,l.jsxs)("div",{className:"onepoint-latest-updates__arrows",children:[(0,l.jsx)("button",{type:"button",className:"onepoint-latest-updates__arrow onepoint-latest-updates__arrow--prev","aria-label":(0,n.__)("Previous","onepoint-custom-blocks"),onClick:()=>{_(e=>(e-1+g.length)%g.length)}}),(0,l.jsx)("button",{type:"button",className:"onepoint-latest-updates__arrow onepoint-latest-updates__arrow--next","aria-label":(0,n.__)("Next","onepoint-custom-blocks"),onClick:()=>{_(e=>(e+1)%g.length)}})]})]}),(0,l.jsx)("div",{className:"onepoint-latest-updates__track",children:(0,l.jsx)("div",{className:"onepoint-latest-updates__track-inner",style:{transform:`translateX(-${g.length>0?h/g.length*100:0}%)`},children:g.map((e,t)=>(0,l.jsxs)("div",{className:"onepoint-latest-updates__card","data-selected":b===t?"true":void 0,onClick:()=>x(t),children:[(0,l.jsxs)("div",{className:"onepoint-latest-updates__card-image-wrap",children:[e.imageUrl?(0,l.jsx)("img",{src:e.imageUrl,alt:e.imageAlt||"",className:"onepoint-latest-updates__card-image",loading:"lazy"}):(0,l.jsx)("div",{className:"onepoint-latest-updates__card-image-placeholder","aria-hidden":"true"}),e.categoryTag&&(0,l.jsx)("span",{className:"onepoint-latest-updates__card-tag",children:e.categoryTag})]}),(0,l.jsxs)("div",{className:"onepoint-latest-updates__card-content",children:[e.title&&(0,l.jsx)("h3",{className:"onepoint-latest-updates__card-title",children:e.title}),e.buttonText&&(0,l.jsx)("a",{href:e.buttonUrl||"#",className:"onepoint-latest-updates__card-cta",onClick:t=>!e.buttonUrl&&t.preventDefault(),children:e.buttonText})]})]},t))})})]})})]})},save:()=>null})}},o={};function n(e){var a=o[e];if(void 0!==a)return a.exports;var l=o[e]={exports:{}};return t[e](l,l.exports,n),l.exports}n.m=t,e=[],n.O=(t,o,a,l)=>{if(!o){var s=1/0;for(d=0;d<e.length;d++){for(var[o,a,l]=e[d],i=!0,r=0;r<o.length;r++)(!1&l||s>=l)&&Object.keys(n.O).every(e=>n.O[e](o[r]))?o.splice(r--,1):(i=!1,l<s&&(s=l));if(i){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[o,a,l]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var a,l,[s,i,r]=o,c=0;if(s.some(t=>0!==e[t])){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(r)var d=r(n)}for(t&&t(o);c<s.length;c++)l=s[c],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(d)},o=globalThis.webpackChunkonepoint_custom_blocks=globalThis.webpackChunkonepoint_custom_blocks||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var a=n.O(void 0,[350],()=>n(505));a=n.O(a)})();